(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(14),u=t.n(c),o=t(2),m=t(3),i=t(4),l=t.n(i),s="https://fso-p3-phonebook.herokuapp.com/api/persons",f=function(){return l.a.get(s).then((function(e){return e.data}))},d=function(e){return l.a.post(s,e).then((function(e){return e.data}))},b=function(e){return l.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},h=function(e,n){return l.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},g=(t(37),function(e){return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:e.name,onChange:e.SearchChange}))}),v=function(e){var n=e.text;return null===n.message?null:r.a.createElement("div",{className:n.category},n)},p=function(e){var n=e.persons,t=e.serachName,a=e.deletePerson,c=n;return t?(c=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))).map((function(e){return r.a.createElement("div",{key:e.id}," ",e.name," ",e.number)})):c.map((function(e){return r.a.createElement("div",{key:e.id},e.name," ",e.number,r.a.createElement("button",{onClick:function(){return a(e.id)}},"delete"))}))},E=function(e){return r.a.createElement("form",{onSubmit:e.add},"name : ",r.a.createElement("input",{value:e.name,onChange:e.PChange}),r.a.createElement("br",null),"number : ",r.a.createElement("input",{value:e.num,onChange:e.NChange}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"add"))},j=function(){var e=Object(a.useState)([]),n=Object(m.a)(e,2),t=n[0],c=n[1];Object(a.useEffect)((function(){f().then((function(e){c(e)}))}),[]);var u=Object(a.useState)(""),i=Object(m.a)(u,2),l=i[0],s=i[1],j=Object(a.useState)(""),O=Object(m.a)(j,2),y=O[0],w=O[1],C=Object(a.useState)(""),k=Object(m.a)(C,2),S=k[0],N=k[1],P=Object(a.useState)({message:null,category:null}),T=Object(m.a)(P,2),x=T[0],D=T[1];return r.a.createElement("div",null,r.a.createElement(v,{text:x}),r.a.createElement("h1",null,"Phonebook"),r.a.createElement(g,{name:S,SearchChange:function(e){return N(e.target.value)}}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(E,{add:function(e){e.preventDefault();var n={name:l,number:y,key:l};if(t.find((function(e){return e.name===n.name}))){if(window.confirm("".concat(l," is already added to phonebook, replace the old number with a new one?"))){var a=t.find((function(e){return e.name===n.name})).id,r={name:l,number:y};h(a,r).then((function(e){var n={message:"Successfully added ".concat(e.name," with number ").concat(e.number),category:"success"};D(n.message),setTimeout((function(){D(Object(o.a)(Object(o.a)({},n),{},{message:null}))}),5e3);var r=t.filter((function(n){return n.id!==a?n:e}));c(r)})).catch((function(e){var n={message:"".concat(r.name," has already been removed from the database"),category:"error"};D(n.message),setTimeout((function(){D(Object(o.a)(Object(o.a)({},n),{},{message:null}))}),5e3)}))}}else d(n).then((function(e){var n={message:"Successfully added ".concat(e.name," with number ").concat(e.number),category:"success"};D(n.message),setTimeout((function(){D(Object(o.a)(Object(o.a)({},n),{},{message:null}))}),5e3),c(t.concat(e)),s(""),w("")})).catch((function(e){var n={message:"".concat(e.name," has already been removed from the database"),category:"error"};D(n.message),setTimeout((function(){D(Object(o.a)(Object(o.a)({},n),{},{message:null}))}),5e3)}))},name:l,num:y,PChange:function(e){return s(e.target.value)},NChange:function(e){return w(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(p,{persons:t,serachName:S,deletePerson:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name," ?"))&&b(e).then((function(n){c(t.filter((function(n){return n.id!==e})))}))}}))};u.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.55ddc9c5.chunk.js.map